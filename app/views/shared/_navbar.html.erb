<%= render 'shared/navbar_modal' %>

<div class="navbar navbar-expand-md navbar-light">
  <div class="navbar-brand">
    <%= render 'shared/logo' %>
  </div>

  <button class="navbar-toggler navbar-toggler-right collapsed" type="button" data-toggle="modal" data-target="#navbar-supported-content" aria-controls="navbar-supported-content" aria-expanded="false" aria-label="toggle-navigation">
    <span class="navbar-toggler-icon open"></span>
    <span class="sr-only">Open navigation</span>
  </button>

  <% if user_signed_in? %>
    <nav class="collapse navbar-collapse">
      <!-- Full Width Navbar -->
      <ul class="navbar-nav ml-auto hidden-md-down">
        <li class="nav-item <%= active_class(path_path(current_user.path)) %>">
          <%= link_to 'My Path', path_url(current_user.path), class: 'nav-link' %>
        </li>

        <li class="nav-item <%= active_class(paths_url) %>">
          <%= link_to 'All Paths', paths_url, class: 'nav-link' %>
        </li>

        <li class="nav-item <%= active_class(chat_link) %>">
          <%= link_to "Community", chat_link, class: 'nav-link', target: '_blank', rel: 'noreferrer' %>
        </li>

        <li class="nav-link nav-divider">
          <span class='divider'>
          </span>
        </li>

        <li>
          <%= link_to notifications_path, data: { test_id: 'navbar-notification-icon' } do %>
            <div class="relative h-6 w-6 text-notification hover:text-notification-hover">
              <% if unread_notifications?(current_user) %>
                <span data-test-id="unread-notifications" class="absolute top-1 right-0.5 w-2 h-2 rounded-lg bg-new-notification"></span>
              <% end %>
              <%= inline_svg_tag 'icons/icon-notification.svg', aria: true, title: 'notifications link', desc: 'a link to the notifications page' %>
            </div>
          <% end %>
        </li>

        <%= render 'shared/user_dropdown' %>
      </ul>
  <% else %>
    <nav class="collapse navbar-collapse">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item <%= active_class(paths_url) %>">
          <%= link_to 'All Paths', paths_url, class: 'nav-link' %>
        </li>

         <li class="nav-item <%= active_class(chat_link) %>">
          <%= link_to "Community", chat_link, class: 'nav-link', target: '_blank', rel: 'noreferrer' %>
        </li>

        <li class="nav-item <%= active_class(about_path) %>">
          <%= link_to 'About', about_path, class: 'nav-link' %>
        </li>

        <li class="nav-item <%= active_class(faq_path) %>">
          <%= link_to "FAQ", faq_path, class: 'nav-link' %>
        </li>

        <li class="nav-item nav-link" id="dark-mode-sun" style="flex-direction: row; justify-content: center;padding-right:0">
          <button data-test-id="dark-mode-button" class="dark-mode-button sun">
           <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
            </svg>
          </button>
        </li>

        <li class="nav-item nav-link" id="dark-mode-moon" style="flex-direction: row; justify-content: center;padding-right:0">
          <button data-test-id="dark-mode-button" class="dark-mode-button moon">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
            </svg>
          </button>
        </li>

        <li class="nav-link nav-divider">
          <span class='divider'>
          </span>
        </li>

        <li class="nav-item <%= active_class(sign_up_path) %>">
          <%= link_to 'Sign Up', sign_up_path, class: 'nav-link', data: {test_id: 'sign_up'} %>
        </li>
        <li class="nav-item <%= active_class(login_path) %>">
          <%= link_to 'Log In', login_path, class: 'nav-link', data: { test_id: 'user-login-link' } %>
        </li>
      </ul>
    </nav>
  <% end %>
    </ul>
  </nav>
</div>
